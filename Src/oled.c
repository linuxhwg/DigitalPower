#include <stdlib.h>
#include <string.h>
#include "main.h"

#include "UI/lv_font.h"
#include "UI/lv_conf.h"
#include "oled.h"


unsigned char initial_tab[]={
     0xae, 

	 0x40,

//	 0x20,
	 0x20,
     0x02,

	 0x81,
	 0xff,

	 0xa1,
	 0xa4,
	 0xA6,
	 0xc8,

	 0xa8,
	 0x3F,
	 
	 0xd5,
	 0x80,

	 0xd3,
	 0x00,

	 0x8d,
	 0x14,

	 0xdb,
	 0x40,

	 0xd9,
	 0xf1,

	 0xAF,
};

// unsigned char const picture_tab[]={
// /*------------------------------------------------------------------------------
// ;  Դ�ļ� / ���� : C:\Documents and Settings\Administrator\����\�½��ļ��� (2)\logo.bmp��ģ
// ;  ����ߣ����أ�: 128��64
// ------------------------------------------------------------------------------*/
// //0x80,0x40,0x10,//���������,�ߵ�������������ֽ������������ÿ�ѡ
// 0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,
// 0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x20,0x44,0x08,0x00,0x18,0x48,0x28,0xC8,0x08,0x28,0x48,0x18,0x00,
// 0x40,0x40,0xFC,0x40,0x40,0xFC,0x00,0x00,0xF8,0x00,0x00,0xFC,0x00,0x40,0x40,0xA0,
// 0x90,0x88,0x84,0x88,0x90,0x20,0x40,0x40,0x00,0x00,0x40,0x44,0xD8,0x20,0xF0,0xAC,
// 0xA8,0xE8,0xB8,0xA8,0xE0,0x00,0x00,0x00,0xC0,0x7C,0x54,0x54,0x54,0x54,0x54,0x54,
// 0x7C,0x40,0x40,0x00,0x00,0xF0,0x90,0x90,0x90,0xFC,0x90,0x90,0x90,0xF0,0x00,0x00,
// 0x00,0x80,0x88,0x88,0x88,0x88,0x88,0xE8,0xA8,0x98,0x8C,0x88,0x80,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
// 0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x04,0x3E,0x01,0x10,0x11,0x09,0x05,0x3F,0x05,0x09,0x11,0x11,0x00,
// 0x08,0x18,0x0F,0x24,0x14,0x0F,0x00,0x00,0x0F,0x00,0x00,0x3F,0x00,0x20,0x22,0x2A,
// 0x32,0x22,0x3F,0x22,0x32,0x2A,0x22,0x20,0x00,0x00,0x20,0x10,0x0F,0x10,0x28,0x24,
// 0x23,0x20,0x2F,0x28,0x2A,0x2C,0x00,0x30,0x0F,0x04,0x3D,0x25,0x15,0x15,0x0D,0x15,
// 0x2D,0x24,0x24,0x00,0x00,0x07,0x04,0x04,0x04,0x1F,0x24,0x24,0x24,0x27,0x20,0x38,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
// 0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,
// 0xFF,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x81,0x41,0x21,0x21,0x61,0x01,0x01,0x21,0xE1,0xE1,0x01,0xE1,0xE1,
// 0x21,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x21,0xE1,0x21,0x21,0x21,0x61,0x01,0x01,
// 0x21,0x21,0xE1,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0xC1,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x21,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
// 0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,
// 0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x0F,0x10,0x20,0x24,0x1C,0x04,0x00,0x20,0x3F,0x01,0x3E,0x01,0x3F,
// 0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x22,0x22,0x27,0x30,0x00,0x00,
// 0x20,0x20,0x3F,0x20,0x20,0x00,0x00,0x1E,0x25,0x25,0x25,0x16,0x00,0x00,0x1E,0x21,
// 0x21,0x21,0x13,0x00,0x01,0x01,0x1F,0x21,0x21,0x00,0x00,0x00,0x21,0x3F,0x22,0x21,
// 0x01,0x00,0x00,0x1E,0x21,0x21,0x21,0x1E,0x00,0x21,0x3F,0x22,0x01,0x01,0x3E,0x20,
// 0x00,0x21,0x21,0x3F,0x20,0x20,0x00,0x00,0x1E,0x21,0x21,0x21,0x13,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
// 0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0xF0,0x08,0x04,0x04,0x04,0x0C,0x00,0xF0,0x08,0x04,0x04,0x08,0xF0,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0xFC,0x04,0x00,
// 0x00,0x00,0x00,0x00,0x0C,0x04,0xFC,0x04,0x0C,0x00,0x04,0xFC,0x04,0x04,0x08,0xF0,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
// 0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x81,0x82,0x84,0x84,0x84,0x82,0x80,0x81,0x82,0x84,0x84,0x82,0x81,
// 0x80,0x80,0x86,0x86,0x80,0x80,0x80,0x80,0x80,0x85,0x83,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x84,0x87,0x84,0x84,
// 0x84,0x86,0x80,0x80,0x80,0x84,0x87,0x84,0x80,0x80,0x84,0x87,0x84,0x84,0x82,0x81,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
// 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,
// };



// unsigned char const picture_tab1[]={
// /*--  ������һ��ͼ��F:\����\8051\OLED1\������ʾ.bmp  --*/
// /*--  ���x�߶�=128x64  --*/
// 0x10,0xD0,0x3C,0x90,0x7C,0x10,0x00,0x00,0x00,0x08,0xFC,0x00,0x00,0x00,0x00,0xF8,
// 0x04,0x04,0x04,0xF8,0x00,0x00,0x00,0x60,0x60,0x00,0x00,0x00,0x00,0xFC,0x44,0x44,
// 0x44,0xFF,0x44,0x44,0x44,0x44,0xFC,0x00,0x00,0x10,0x08,0x7C,0x03,0x10,0x90,0x3F,
// 0x48,0x44,0x44,0x42,0x70,0x00,0x00,0x00,0x00,0x00,0xC0,0x3F,0xC0,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0xFF,0x49,0x49,0x49,0x79,0xC9,0x49,0x49,0x4F,0x40,0x40,0x00,
// 0x80,0x84,0x84,0x84,0xFF,0x84,0x84,0x84,0xFF,0x84,0x84,0x80,0x00,0x10,0x92,0x52,
// 0xFE,0x51,0x91,0x10,0xFC,0x04,0x04,0xFC,0x00,0x00,0x00,0xFF,0x01,0x25,0x25,0xFD,
// 0x25,0x65,0xA5,0x01,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x01,0x07,0x01,0x07,0x01,0x01,0x00,0x00,0x00,0x04,0x07,0x04,0x00,0x00,0x00,0x03,
// 0x04,0x04,0x04,0x03,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x0F,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x01,0x01,0x01,0x01,0x01,0x0F,0x01,
// 0x01,0x01,0x01,0x01,0xC1,0x80,0x08,0x04,0xC2,0x01,0x00,0x00,0x80,0x01,0x02,0x04,
// 0x0C,0x04,0x00,0x00,0x0F,0x08,0x04,0xC2,0x80,0x01,0x02,0x04,0x08,0x08,0x0E,0x00,
// 0x00,0x08,0x84,0x82,0x81,0x80,0x80,0x81,0x82,0x84,0x88,0x80,0x00,0x02,0x01,0x00,
// 0x0F,0x00,0x00,0x00,0x07,0x82,0x02,0x03,0x00,0x00,0x80,0x0F,0x05,0x05,0x05,0x05,
// 0x05,0x05,0x05,0x05,0x0F,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x10,0xF0,0x1E,0x10,0xF0,0x1E,0x10,0x00,0x00,0x04,0x04,0xFE,0x00,0x00,0x00,0x00,
// 0x00,0x1C,0x02,0x02,0x82,0x62,0x1C,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,
// 0x00,0x00,0xFF,0x82,0x82,0x82,0x82,0xFF,0x82,0x82,0x82,0x82,0xFF,0x02,0x00,0x00,
// 0x08,0x04,0x02,0x7F,0x00,0x00,0x04,0xC4,0x1F,0x22,0x22,0x21,0x21,0x39,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0xC0,0x30,0x0F,0x70,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0xFF,0x24,0x24,0x24,0x24,0x3C,0xE4,0x24,0x24,0x27,0x20,0x20,0x00,0x00,
// 0x80,0x84,0x84,0x84,0x84,0xFF,0x84,0x84,0x84,0x84,0xFF,0x84,0x84,0x84,0x80,0x00,
// 0x00,0x09,0x89,0x69,0xFF,0x48,0x88,0x08,0x00,0xFE,0x02,0x02,0x02,0xFE,0x00,0x00,
// 0x01,0x0F,0x01,0x01,0x0F,0x01,0x01,0x00,0x00,0x08,0x08,0x0F,0x08,0x08,0x00,0x00,
// 0x00,0x0C,0x0A,0x09,0x08,0x08,0x0C,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00,
// 0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,
// 0x80,0x01,0x01,0x01,0x01,0x01,0x01,0x3F,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x80,
// 0x80,0x10,0x08,0x04,0x83,0x00,0x00,0x00,0x00,0x01,0x03,0x06,0x0C,0x18,0x08,0x00,
// 0x00,0x00,0x3F,0x10,0x08,0x84,0x80,0x00,0x00,0x03,0x04,0x08,0x10,0x3C,0x00,0x00,
// 0x00,0x00,0x20,0x10,0x0C,0x07,0x02,0x00,0x00,0x01,0x02,0x0C,0x38,0x10,0x80,0x00,
// 0x04,0x02,0x01,0x00,0x3F,0x00,0x03,0x01,0x00,0x0F,0x04,0x04,0x04,0x0F,0x00,0x00,
// 0x10,0x90,0xFE,0x10,0x10,0x90,0xFE,0x10,0x00,0x00,0x00,0x04,0x04,0xFE,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0xC0,0x30,0x08,0x04,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x60,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0xF8,0x08,0x08,0x08,0x08,0x08,
// 0xFF,0x08,0x08,0x08,0x08,0x08,0xFC,0x00,0x00,0x00,0x00,0x20,0x10,0x08,0xFE,0x05,
// 0x00,0x20,0x20,0x10,0xFF,0x88,0x88,0x84,0x82,0x83,0xE0,0x80,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x80,0xFF,0x1F,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0xFF,0x91,0x91,0x91,0x91,0x91,0xF1,0x91,0x91,0x91,0x91,0x9F,0x80,
// 0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x04,0x3F,0x04,0x04,0x04,0x3F,0x04,0x04,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,
// 0x00,0x00,0x00,0x00,0x03,0x02,0x02,0x22,0x22,0x3F,0x22,0x22,0x00,0x00,0x00,0x00,
// 0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x01,0x01,0x01,0x01,0x01,
// 0xFF,0x01,0x01,0x01,0x01,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x09,0x08,
// 0x08,0x08,0x08,0xFF,0x08,0x08,0x08,0x08,0x08,0x08,0x04,0x04,0x00,0x00,0x80,0x40,
// 0x40,0x20,0x10,0x0C,0x03,0x00,0x00,0x00,0x03,0x0C,0x18,0x30,0x60,0x60,0x00,0x00,
// 0x00,0x00,0x00,0x7F,0x60,0x20,0x20,0x10,0x00,0x01,0x06,0x18,0x30,0x60,0x40,0x40,
// 0xF0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x20,0x20,0x40,0x80,0x00,0x20,0xE0,0x20,0x00,
// 0x00,0x00,0x00,0x20,0xE0,0x20,0x20,0x20,0x60,0x00,0x20,0xE0,0x20,0x20,0x40,0x80,
// 0x00,0x00,0xE0,0x20,0x20,0x20,0xF8,0x20,0x20,0x20,0x20,0xE0,0x00,0x00,0x20,0x20,
// 0x20,0xE0,0x20,0x28,0x30,0x20,0xE0,0x20,0x20,0x20,0x00,0x00,0x00,0xF0,0x50,0x50,
// 0x50,0x50,0x50,0x50,0xF8,0x10,0x00,0x00,0x00,0x80,0x90,0x90,0x90,0x90,0x90,0x90,
// 0x90,0x98,0xD0,0x80,0x00,0x20,0x20,0xE8,0x30,0x60,0xA0,0x80,0x60,0x58,0x40,0xC0,
// 0x40,0x00,0x00,0x00,0xF8,0x28,0x28,0x28,0xF8,0x28,0x28,0xF8,0x00,0x00,0x00,0x00,
// 0x00,0x80,0xC0,0x60,0xF8,0xF8,0x60,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,0x20,0x3F,0x20,0x20,
// 0x20,0x30,0x00,0x20,0x3F,0x22,0x22,0x27,0x30,0x00,0x20,0x3F,0x20,0x20,0x10,0x0F,
// 0x00,0x00,0x07,0x02,0x02,0x02,0x7F,0x02,0x02,0x02,0x02,0x07,0x00,0x00,0x40,0x40,
// 0x40,0x20,0x23,0x14,0x08,0x16,0x21,0x20,0x40,0x40,0x00,0x40,0x44,0x49,0x51,0x7F,
// 0x41,0x41,0x7F,0x51,0x49,0x64,0x40,0x00,0x20,0x10,0x08,0x06,0x00,0x40,0x7F,0x00,
// 0x02,0x04,0x08,0x30,0x00,0x42,0x21,0x12,0x0C,0x13,0x20,0x40,0x27,0x18,0x14,0x23,
// 0x40,0x00,0x44,0x44,0x25,0x15,0x0D,0x05,0x7F,0x0D,0x15,0x25,0x64,0x24,0x00,0x00,
// 0x03,0x01,0x00,0x00,0xFF,0xFF,0x00,0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,
// };


// unsigned char const picture_tab2[]={
// /*--  ������һ��ͼ��F:\����\8051\OLED1\abcd.bmp  --*/
// /*--  ���x�߶�=128x64  --*/
// 0x00,0x00,0x00,0xF0,0x08,0x04,0x04,0x08,0xF0,0x00,0x04,0xFC,0x04,0x00,0x00,0x00,
// 0x00,0x04,0xFC,0x44,0x44,0xE4,0x0C,0x00,0x04,0xFC,0x04,0x04,0x08,0xF0,0x00,0xA8,
// 0xAE,0x98,0xFF,0xAC,0x8A,0x10,0xFC,0x0B,0x88,0x78,0x08,0x00,0x88,0x86,0x92,0x92,
// 0x92,0x92,0xD3,0xB2,0x92,0x82,0x8A,0x86,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0xF2,0x92,0x97,0x92,0xFA,0x92,0x97,0xF2,
// 0x82,0x82,0x00,0x04,0x04,0x04,0x1C,0x64,0x85,0x06,0xC4,0x3C,0x04,0x04,0x04,0x00,
// 0x00,0x80,0x3E,0x2A,0xEA,0x2A,0x2A,0xEA,0x2A,0x3F,0x82,0x00,0x00,0x00,0x10,0x12,
// 0xD2,0x12,0x12,0xF2,0x12,0x52,0x93,0x1A,0x10,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,
// 0x00,0x00,0x00,0x01,0xC2,0x04,0xC4,0x02,0x81,0x40,0x44,0x47,0x84,0x04,0x04,0x06,
// 0x00,0x04,0x07,0x04,0x04,0x84,0xC6,0x00,0x04,0x07,0x84,0x44,0x42,0x41,0x80,0x08,
// 0x88,0x45,0x42,0x42,0x85,0x08,0x04,0x03,0x82,0xC4,0x08,0x00,0xC0,0x40,0x40,0x40,
// 0x40,0x08,0x8F,0x40,0x40,0xC0,0x00,0x00,0xC0,0x40,0x41,0xC2,0x46,0x00,0x80,0x40,
// 0x40,0x40,0x80,0x00,0x80,0x40,0x48,0x48,0x88,0x04,0x82,0x41,0x40,0x41,0x82,0x04,
// 0x08,0x08,0x00,0x08,0x08,0x08,0x44,0xC4,0x02,0x01,0x02,0x04,0x04,0x08,0x08,0x00,
// 0x08,0x08,0x09,0x0A,0x0F,0x48,0xC8,0x0F,0x0A,0x09,0xCC,0x08,0x00,0x04,0x42,0xC1,
// 0x40,0x40,0x88,0x0F,0x80,0x40,0x40,0x41,0xC6,0x00,0x40,0xC6,0x46,0x40,0x80,0x00,
// 0x00,0x00,0x09,0x3D,0x0B,0x3D,0x0B,0x09,0x03,0x34,0x24,0x24,0x1F,0x00,0x00,0x00,
// 0x21,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x31,0x28,0x24,0x22,0x21,0x00,
// 0x10,0x20,0x22,0x22,0x1D,0x00,0x04,0x0B,0x08,0x3F,0x28,0x00,0x13,0x22,0x22,0x22,
// 0x1C,0x00,0x1F,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x3E,0x01,0x00,0x00,0x1D,0x22,
// 0x22,0x22,0x1D,0x00,0x03,0x34,0x24,0x24,0x1F,0x00,0x1F,0x20,0x20,0x20,0x1F,0x00,
// 0x00,0x14,0x2A,0x2A,0x3C,0x20,0x00,0x3F,0x22,0x22,0x1C,0x00,0x00,0x1C,0x22,0x22,
// 0x26,0x00,0x00,0x1C,0x22,0x22,0x3F,0x20,0x20,0x3E,0x09,0x0F,0x38,0x20,0x20,0x3F,
// 0x22,0x22,0x1D,0x00,0x1F,0x20,0x20,0x20,0x10,0x00,0x20,0x3F,0x20,0x20,0x1F,0x00,
// 0x00,0x00,0x88,0xE8,0x9E,0xC8,0xBE,0x88,0x00,0x00,0x00,0x04,0xFE,0x00,0x00,0x00,
// 0x00,0xFC,0x02,0x02,0x02,0xFC,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,
// 0x04,0xFE,0x00,0x00,0x00,0x00,0x0C,0x82,0x42,0x22,0x1C,0x00,0x00,0x04,0x02,0x12,
// 0x12,0xEC,0x00,0x40,0xB0,0x88,0x84,0xFE,0x00,0x00,0x00,0xBE,0x12,0x12,0x12,0xE2,
// 0x00,0x00,0xF8,0x24,0x12,0x12,0xE6,0x00,0x00,0x20,0x90,0x50,0x50,0xE0,0x00,0x02,
// 0xFE,0x10,0x10,0x10,0xE0,0x00,0x00,0xE0,0x10,0x10,0x10,0x30,0x00,0x00,0xE0,0x10,
// 0x10,0x12,0xFE,0x00,0x00,0x80,0x78,0x46,0x78,0x80,0x00,0x02,0xFE,0x12,0x12,0x12,
// 0xEC,0x00,0xF8,0x04,0x02,0x02,0x02,0x06,0x00,0x02,0xFE,0x02,0x02,0x04,0xF8,0x00,
// 0x40,0xC0,0x78,0x43,0xC0,0x7B,0x40,0x00,0x00,0x10,0x10,0xFA,0x03,0x02,0x00,0x00,
// 0x00,0x71,0x0A,0x0A,0x0A,0x89,0x70,0x00,0x00,0x03,0x03,0xC0,0xC0,0x00,0x00,0x00,
// 0x02,0x13,0x12,0xF8,0x00,0x00,0x03,0x02,0x02,0x72,0x0A,0x08,0x08,0x89,0x72,0x02,
// 0x02,0x31,0x08,0x88,0x88,0x48,0x32,0x03,0x02,0x00,0xC0,0x21,0x12,0xFA,0x02,0x01,
// 0x00,0xF8,0x09,0x8A,0x8A,0x0A,0x09,0x00,0x00,0xE1,0x12,0x8A,0x8A,0x1B,0x02,0x00,
// 0x03,0x02,0x82,0x82,0x81,0x80,0x00,0x01,0x0A,0xFA,0x02,0x81,0x80,0x00,0x01,0x02,
// 0x02,0x02,0x03,0x82,0x82,0x83,0x02,0x00,0x02,0x03,0xC2,0x3A,0xE3,0x02,0x02,0x02,
// 0x09,0xF8,0x88,0x89,0x8A,0x72,0x02,0x01,0xC0,0x32,0x0B,0x0A,0x0A,0x09,0x38,0x00,
// 0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
// 0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,
// 0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,
// 0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,
// 0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,
// 0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,
// 0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,
// 0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,
// 0x10,0x90,0xFE,0x10,0x10,0x90,0xFE,0x10,0x00,0x00,0x00,0x04,0x04,0xFE,0x00,0x00,
// 0x00,0x00,0x00,0x00,0x00,0xC0,0x30,0x08,0x04,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
// 0x00,0x60,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0xFE,0x00,0x00,0x00,0x00,
// 0x00,0x00,0x1C,0x02,0x02,0x02,0x02,0xC2,0x3C,0x00,0x00,0x00,0x1C,0x02,0x42,0x42,
// 0x62,0x9C,0x00,0x00,0x00,0x00,0x80,0x40,0x40,0x40,0x40,0x40,0x80,0x00,0x00,0x00,
// 0x02,0xFE,0x80,0x40,0x40,0x40,0x80,0x00,0x00,0x00,0x00,0x80,0x40,0x40,0x40,0x80,
// 0x00,0x00,0x00,0x00,0x00,0x80,0x78,0x06,0x78,0x80,0x00,0x00,0x00,0x00,0x02,0xFE,
// 0x42,0x42,0x42,0x62,0x9C,0x00,0x00,0x00,0xF0,0x08,0x04,0x02,0x02,0x02,0x04,0x0E,
// 0x04,0x3F,0x04,0x04,0x04,0x3F,0x04,0x04,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,
// 0x00,0x00,0x00,0x00,0x03,0x02,0x02,0x22,0x22,0x3F,0x22,0x22,0x00,0x00,0x00,0x00,
// 0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
// 0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x20,0x38,0x00,0x00,0x00,0x1C,0x20,0x20,0x20,
// 0x20,0x10,0x0F,0x00,0x00,0x00,0x19,0x24,0x24,0x22,0x22,0x22,0x3F,0x20,0x30,0x00,
// 0x00,0x3F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,0x00,0x0F,0x10,0x20,0x20,0x20,0x11,
// 0x08,0x00,0x00,0x20,0x38,0x27,0x02,0x02,0x02,0x27,0x38,0x20,0x00,0x00,0x20,0x3F,
// 0x20,0x20,0x20,0x20,0x10,0x0F,0x00,0x00,0x07,0x18,0x20,0x20,0x20,0x20,0x10,0x0C,
// };

uint8_t OledDisplayBuffer[64/8*128];

void Ins_trans(unsigned char command)
{ 
    unsigned char counter;
    HAL_GPIO_WritePin(OLED_CS_PORT, OLED_CS_PIN, GPIO_PIN_RESET);
    HAL_GPIO_WritePin(OLED_DC_PORT, OLED_DC_PIN, GPIO_PIN_RESET);
    for(counter=0;counter<8;counter++)
    { 
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_RESET);
        if((command&0x80)>>7)
            HAL_GPIO_WritePin(OLED_SDA_PORT, OLED_SDA_PIN, GPIO_PIN_SET);
        else
            HAL_GPIO_WritePin(OLED_SDA_PORT, OLED_SDA_PIN, GPIO_PIN_RESET);
        command=command<<1;
        // HAL_Delay(1);
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_SET);
        // HAL_Delay(1);
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_RESET);
    }
    HAL_GPIO_WritePin(OLED_CS_PORT, OLED_CS_PIN, GPIO_PIN_SET);
    HAL_GPIO_WritePin(OLED_DC_PORT, OLED_DC_PIN, GPIO_PIN_SET);
}
void Data_trans(unsigned char command)
{ 
    unsigned char counter;
    HAL_GPIO_WritePin(OLED_CS_PORT, OLED_CS_PIN, GPIO_PIN_RESET);
    HAL_GPIO_WritePin(OLED_DC_PORT, OLED_DC_PIN, GPIO_PIN_SET);
    for(counter=0;counter<8;counter++)
    { 
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_RESET);
        if((command&0x80)>>7)
            HAL_GPIO_WritePin(OLED_SDA_PORT, OLED_SDA_PIN, GPIO_PIN_SET);
        else
            HAL_GPIO_WritePin(OLED_SDA_PORT, OLED_SDA_PIN, GPIO_PIN_RESET);
        command=command<<1;
        // HAL_Delay(1);
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_SET);
        // HAL_Delay(1);
        HAL_GPIO_WritePin(OLED_SCK_PORT, OLED_SCK_PIN, GPIO_PIN_RESET);
    }
    HAL_GPIO_WritePin(OLED_CS_PORT, OLED_CS_PIN, GPIO_PIN_SET);
    HAL_GPIO_WritePin(OLED_DC_PORT, OLED_DC_PIN, GPIO_PIN_SET);
}
void Column_set(unsigned char column)
{
    Ins_trans(0x10|(column>>4));
    Ins_trans(0x00|(column&0x0f));	 
}
void Page_set(unsigned char page)
{
    Ins_trans(0xb0+page);
}
void Screen_clear()
{
    unsigned char page,column;
    for(page=0;page<8;page++)             //page loop
    { 
        Page_set(page);
        Column_set(0);	  
        for(column=0;column<128;column++)	//column loop
        {
            Data_trans(0x00);
        }
    }
}

void Picture_display(unsigned char *ptr_pic)
{
    unsigned char page,column;
    // Ins_trans(0x81);
    // Ins_trans(0x1F);
    for(page=0;page<(64/8);page++)        //page loop
    { 
        Page_set(page);
        Column_set(0);	  
        for(column=0;column<128;column++)	//column loop
        {
            Data_trans(*ptr_pic++);
        }
    }
    // HAL_Delay(15);
}
void Picture_display2(unsigned char *ptr_pic)
{
    unsigned char i;
    //Ins_trans(0x81);
    //Ins_trans(0x1F);
    Page_set(0);
    Column_set(0);
    for(i=0;i<(64/8*128);i++)        //page loop
    { 
        Data_trans(*ptr_pic++);
    }
    // HAL_Delay(15);
}
void OLED_Init(void)
{

    // RES=0;
    // Delay(10);
    // RES=1;
    // Initial();
    HAL_GPIO_WritePin(OLED_RST_PORT, OLED_RST_PIN, GPIO_PIN_RESET);
    HAL_Delay(10);
    HAL_GPIO_WritePin(OLED_RST_PORT, OLED_RST_PIN, GPIO_PIN_SET);

    unsigned char i;
    for(i=0;i<sizeof(initial_tab);i++)
    {
        Ins_trans(initial_tab[i]);
    }
 //   return;
 //   for(i=0;i<5;i++)
    // {
    //     Picture_display(picture_tab);
    //     HAL_Delay(1000);
    //     Picture_display(picture_tab1);
    //     HAL_Delay(1000);
    //     Picture_display(picture_tab2);
    //     HAL_Delay(1000);
    // }
    
}




int getRotation(void)
{
  return 4;
}
int width(void)
{
  return WIDTH;
}
int height(void)
{
  return HEIGHT;
}

void OledDrawAll(uint16_t color)
{
  if(color == BLACK)
    memset(OledDisplayBuffer, 0, sizeof(OledDisplayBuffer));
  else if(color == WHITE)
    memset(OledDisplayBuffer, 0xFF, sizeof(OledDisplayBuffer));
}

// the most basic function, set a single pixel
void OledDrawPixel(int16_t x, int16_t y, uint16_t color) {
  if ((x < 0) || (x >= width()) || (y < 0) || (y >= height()))
    return;

  // check rotation, move pixel around if necessary
  switch (getRotation()) {
  case 1:
    ssd1306_swap(x, y);
    x = WIDTH - x - 1;
    break;
  case 2:
    x = WIDTH - x - 1;
    y = HEIGHT - y - 1;
    break;
  case 3:
    ssd1306_swap(x, y);
    y = HEIGHT - y - 1;
    break;
  case 4:
  //  ssd1306_swap(x, y);
    // y = HEIGHT - y - 1;
    break;
  }

  // x is which column
    switch (color)
    {
      case WHITE:   OledDisplayBuffer[x+ (y/8)*SSD1306_LCDWIDTH] |=  (1 << (y&7)); break;
      case BLACK:   OledDisplayBuffer[x+ (y/8)*SSD1306_LCDWIDTH] &= ~(1 << (y&7)); break;
      case INVERSE: OledDisplayBuffer[x+ (y/8)*SSD1306_LCDWIDTH] ^=  (1 << (y&7)); break;
    }

}


int OledDrawText(lv_font_t * font_p, int xStart, int yStart, char* string)
{
  const uint8_t* font_bitmap;
  char letter = 'A';
  int bpp;
  int width;
  int hight;
  int x,y,xOffset,yOffset;

//   memset(OledDisplayBuffer, 0, (64/8*128));
  xOffset = xStart;
  yOffset = yStart;
  while(*string)
  {
    letter = *string;
    string++;
    font_bitmap = lv_font_get_bitmap(font_p, letter);
    bpp = lv_font_get_bpp(font_p, letter);
    width = lv_font_get_width(font_p, letter);
    hight = lv_font_get_height(font_p);
    // printf("letter %c bpp %d width %d hight %d\r\n", letter, bpp, width,hight);
    if(bpp == 1)
    {
        //memcpy(OledDisplayBuffer, font_bitmap, 20);
    }

    for(y=0;y<hight;y++)
    {
        for(x=0;x<width;x++)
        {
            if(font_bitmap[x/8+y*((width+7)/8)]&(0x80>>(x%8)))
            {
                OledDrawPixel(x+xOffset,y+yOffset,WHITE);
            }
            else
            {
                OledDrawPixel(x+xOffset,y+yOffset,BLACK);
            }
        }
        OledDrawPixel(width+xOffset,y+yOffset,BLACK);
    }
    xOffset+=width+1;  
  }
  return xOffset-xStart;

 // OledDisplayBuffer[0] = 0xff;
 // OledDisplayBuffer[1] = 0xff;
}


int OledDrawTextWithSelect(lv_font_t * font_p, int xStart, int yStart, char* string, int selectStartIndex, int selectLen, TextSelectShow_t showtype)
{
  const uint8_t* font_bitmap;
  char letter = 'A';
  int bpp;
  int width;
  int hight;
  int x,y,xOffset,yOffset;
  int charIndex = 0;

//   memset(OledDisplayBuffer, 0, (64/8*128));
  xOffset = xStart;
  yOffset = yStart;
  while(*string)
  {
    letter = *string;
    string++;
    font_bitmap = lv_font_get_bitmap(font_p, letter);
    bpp = lv_font_get_bpp(font_p, letter);
    width = lv_font_get_width(font_p, letter);
    hight = lv_font_get_height(font_p);
    // printf("letter %c bpp %d width %d hight %d\r\n", letter, bpp, width,hight);
    if(bpp == 1)
    {
        //memcpy(OledDisplayBuffer, font_bitmap, 20);
    }
    if( (charIndex >= selectStartIndex)&& \
        (charIndex < (selectStartIndex+selectLen))\
        &&(showtype!=TEXT_SELECT_SHOW_NORMAL)){
      if(showtype == TEXT_SELECT_SHOW_WHITE){
        for(y=0;y<hight;y++){
            for(x=0;x<width;x++){
              OledDrawPixel(x+xOffset,y+yOffset,WHITE);
            }
            OledDrawPixel(width+xOffset,y+yOffset,WHITE);
        }
      }
      else if(showtype == TEXT_SELECT_SHOW_BLACK){
        for(y=0;y<hight;y++){
            for(x=0;x<width;x++){
              OledDrawPixel(x+xOffset,y+yOffset,BLACK);
            }
            OledDrawPixel(width+xOffset,y+yOffset,BLACK);
        }
      }
      else if(showtype == TEXT_SELECT_SHOW_TRANSPARENT){
        for(y=0;y<hight;y++){
            for(x=0;x<width;x++){
                if(font_bitmap[x/8+y*((width+7)/8)]&(0x80>>(x%8))){
                    OledDrawPixel(x+xOffset,y+yOffset,WHITE);
                }
            }
            OledDrawPixel(width+xOffset,y+yOffset,BLACK);
        }
      }
      else if(showtype == TEXT_SELECT_SHOW_INVERT){
        for(y=0;y<hight;y++){
            for(x=0;x<width;x++){
                if(font_bitmap[x/8+y*((width+7)/8)]&(0x80>>(x%8))){
                    OledDrawPixel(x+xOffset,y+yOffset,BLACK);
                }
                else{
                  OledDrawPixel(x+xOffset,y+yOffset,WHITE);
              }
            }
            OledDrawPixel(width+xOffset,y+yOffset,WHITE);
        }
      }
    }
    else{
      for(y=0;y<hight;y++){
          for(x=0;x<width;x++){
              if(font_bitmap[x/8+y*((width+7)/8)]&(0x80>>(x%8))){
                  OledDrawPixel(x+xOffset,y+yOffset,WHITE);
              }
              else{
                  OledDrawPixel(x+xOffset,y+yOffset,BLACK);
              }
          }
          OledDrawPixel(width+xOffset,y+yOffset,BLACK);
      }
    }
    
    xOffset+=width+1;  
    charIndex++;
  }
  return xOffset-xStart;

 // OledDisplayBuffer[0] = 0xff;
 // OledDisplayBuffer[1] = 0xff;
}

void OledDisplayRefresh(void)
{
  Picture_display(OledDisplayBuffer);
}

